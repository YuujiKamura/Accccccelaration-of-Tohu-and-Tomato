# プロジェクト整理ツール

このドキュメントでは、プロジェクトのディレクトリ構造を整理するための統合ツール `project_reorganizer.py` の使用方法を説明します。

## 概要

複数あった整理スクリプト（`auto_reorganize.py`, `smart_reorganize.py`, `organize_project_safe.py`）を一つにまとめ、機能を強化しました。このスクリプトは以下の機能を提供します：

- プロジェクトの自動バックアップ
- 新しいディレクトリ構造の作成
- ファイルの検出と移動
- インポートパスの自動更新
- 実行スクリプトの生成
- 元ファイルの処理オプション（保持/削除）

## 使用方法

### 基本的な使用方法

```bash
python project_reorganizer.py
```

このコマンドを実行すると、インタラクティブモードで起動します。各ステップで確認メッセージが表示されます。

### コマンドラインオプション

以下のコマンドラインオプションが利用可能です：

- `--auto`: 自動モードで実行します。確認メッセージを表示せずに全ての処理を実行します。
- `--keep-originals`: 元のファイルを保持します（削除しません）。
- `--dry-run`: 実際に変更を適用せずに、何が行われるかをシミュレーションします。

例：
```bash
# 自動モードで実行（確認なし）
python project_reorganizer.py --auto

# 元ファイルを残して実行
python project_reorganizer.py --keep-originals

# シミュレーションモード
python project_reorganizer.py --dry-run
```

### Windowsでの実行

Windowsでは、同梱の `run_project_reorganizer.bat` を使用して実行できます：

```
# 基本実行
run_project_reorganizer.bat

# オプション付き実行
run_project_reorganizer.bat --auto
run_project_reorganizer.bat --dry-run
```

## 新しいディレクトリ構造

このツールは以下のディレクトリ構造を作成します：

```
プロジェクト/
├── src/                # ソースコード
│   ├── game/          # ゲーム関連コード
│   │   ├── core/     # コア機能
│   │   ├── ui/       # ユーザーインターフェース
│   │   └── utils/    # ゲーム特有ユーティリティ
│   └── common/        # 共通機能
├── tests/             # テストコード
│   ├── unit/         # ユニットテスト
│   ├── integration/  # 統合テスト
│   └── performance/  # パフォーマンステスト
├── docs/              # ドキュメント
│   ├── specs/        # 仕様書
│   └── user_guides/  # ユーザーガイド
├── scripts/           # 実行スクリプト
└── tools/             # 開発ツール
    ├── analysis/     # 分析ツール
    └── development/  # 開発支援ツール
```

## 注意事項

- 実行前に作業中の変更をコミットまたは保存してください。
- 処理の前に自動的にバックアップが作成されます。
- エラーが発生した場合、ログファイルを確認してください。ログは `reorganization_logs` ディレクトリに保存されます。

## 旧スクリプトからの変更点

この統合スクリプトには以下の改良が含まれています：

1. コマンドライン引数のサポート
2. ドライランモード（シミュレーション）
3. より詳細なエラー処理とログ記録
4. 元ファイル処理の柔軟なオプション
5. よりスマートなファイル検出（代替ファイルのサポート）
6. インポートパス更新の改善
7. 問題発生時の対話的リカバリーオプション

## 旧スクリプトの整理

不要になった旧スクリプトは `cleanup_reorganization_scripts.bat` を実行して整理できます。このバッチファイルは旧スクリプトをバックアップした後、安全に削除します。 