# プロジェクト構造の詳細

このドキュメントでは、「アクセラレーションオブ豆腐」プロジェクトの詳細な構造と各コンポーネントの役割を説明します。

## 主要なディレクトリ構造

```
アクセラレーションオブ豆腐/
├── main.py                    # ゲームのメインエントリーポイント
├── run_game.py                # 簡易起動スクリプト
├── src/                       # ソースコードディレクトリ
│   ├── game/                  # ゲーム関連コード
│   │   ├── core/              # ゲームのコア機能
│   │   ├── ui/                # ユーザーインターフェース
│   │   └── utils/             # ゲーム特有のユーティリティ
│   └── common/                # 共通機能
├── tests/                     # テスト関連ファイル
│   ├── unit/                  # ユニットテスト
│   ├── integration/           # 統合テスト
│   ├── tools/                 # テスト関連ツール
│   │   ├── analysis/          # パフォーマンス分析ツール
│   │   ├── development/       # 開発補助ツール
│   │   └── advertise_mode/    # デモモード分析ツール
│   ├── scripts/               # テスト実行スクリプト
│   │   ├── utility/           # ユーティリティスクリプト
│   │   └── batch/             # バッチスクリプト
│   ├── helpers/               # テスト補助機能
│   └── run.py                 # テスト実行スクリプト
├── build/                     # ビルド出力
│   └── web/                   # Webブラウザ版
└── advertise_mode/            # デモモード開発ツール
    ├── analyzer/              # デモモード分析
    └── core/                  # デモモードコア機能
```

## 詳細説明

### メインファイル

#### `main.py`
ゲームのメインエントリーポイントです。このファイルを直接実行するとゲームが起動します。
主要なゲームループ、プレイヤー、敵、弾などのクラス定義が含まれています。

#### `run_game.py`
ゲームを起動するための簡易スクリプトです。より簡単にゲームを起動できるようにするためのラッパーです。

### ソースコード (`src/`)

#### `src/game/core/`
ゲームのコア機能を含むディレクトリです：
- プレイヤーのクラスと動作
- 敵のクラスと動作
- 弾のクラスと動作
- 衝突判定
- ゲームロジック

#### `src/game/ui/`
ユーザーインターフェース関連のコード：
- メニュー
- HUD (ヘッドアップディスプレイ)
- スコア表示
- 効果エフェクト

#### `src/game/utils/`
ゲーム特有のユーティリティ関数：
- 計算ヘルパー
- ゲーム内リソース管理
- 設定ロード・保存

#### `src/common/`
複数のモジュールで共有される共通機能：
- ログ機能
- ファイル操作
- 一般的なユーティリティ

### テスト (`tests/`)

#### `tests/unit/`
個々のコンポーネントのユニットテスト：
- `test_beam_rifle.py` - ビームライフルの機能テスト
- `test_dash_motion.py` - ダッシュ機能のテスト
- その他の個別機能テスト

#### `tests/integration/`
複数のコンポーネントを組み合わせた統合テスト：
- プレイヤーと敵の相互作用
- 武器と敵の相互作用
- ゲームループの検証
- `test_results/` - テスト結果データ
- `benchmark_results/` - パフォーマンス計測結果

#### `tests/tools/`
テスト関連ツール：
- `analysis/` - パフォーマンス分析
  - `test_report.py` - テスト結果レポート生成ツール
  - パフォーマンスモニタリングツール
- `development/` - 開発補助ツール
- `advertise_mode/` - デモモード分析・改善ツール

#### `tests/scripts/`
テスト実行のためのスクリプト：
- `run_single_test.py` - 単一テスト実行スクリプト
- `watch_tests.py` - 監視モードスクリプト
- `utility/` - ユーティリティスクリプト
  - テストファイル変換
  - インポート問題検出/修正
  - プロジェクト整理ツール
- `batch/` - バッチ処理ファイル

#### `tests/helpers/`
テスト用のヘルパー機能：
- モックオブジェクト
- テストフィクスチャ
- アサーションヘルパー

#### `tests/run.py`
テスト実行のメインスクリプト。全テストまたは特定のテストを実行します。

### ビルド (`build/`)

Webブラウザで動作するバージョンのゲームビルドが含まれています：
- `web/` - Webアプリケーションのファイル
  - `index.html` - メインのHTMLファイル
- `version.txt` - ビルドのバージョン情報

### デモモード開発 (`advertise_mode/`)

ゲームのデモモード（自動プレイ）の開発・分析用ツール：
- `analyzer/` - デモモードの動作分析ツール
- `core/` - デモモードのコア機能
- `tests/` - デモモード関連のテスト
- `analyzer.py` - メイン分析スクリプト
- `improver.py` - デモモード改善ツール

## ファイル命名規則

- テストファイル: `test_*.py`
- ユーティリティスクリプト: 機能を表す名前
- クラス: キャメルケース (例: `PlayerMovement`)
- 関数とメソッド: スネークケース (例: `calculate_difficulty`)

## 実行方法の詳細

### ゲーム実行

標準実行:
```
python run_game.py
```

直接メインファイル実行:
```
python main.py
```

デバッグモード:
```
python -m src.game.core.main
```

### テスト実行

すべてのテスト:
```
python -m tests.run
```

特定のテスト:
```
python -m tests.run unit.test_beam_rifle
```

監視モード:
```
python -m tests.run --watch unit
``` 